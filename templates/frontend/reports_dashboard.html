{% extends 'frontend/base.html' %}

{% block title %}<span data-translate="reports_dashboard">Reports Dashboard</span> - <span data-translate="vessel_sales_system">Vessel Sales System</span>{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="row mb-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h2>
                    <i class="bi bi-graph-up text-primary"></i> 
                    <span data-translate="reports_dashboard">Reports Dashboard</span>
                </h2>
                <p class="text-muted mb-0">
                    <span data-translate="comprehensive_business_analytics">Comprehensive business analytics and reporting center</span>
                </p>
            </div>
            <div class="text-end">
                <small class="text-muted d-block">
                    <span data-translate="last_updated">Last Updated</span>: <span id="last-updated-time"></span>
                </small>
            </div>
        </div>
    </div>
</div>

<!-- Today's Statistics -->
<div class="row mb-4">
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stats-card">
            <div class="stats-number text-success" data-number data-original="{{ today_stats.revenue|default:0|floatformat:0 }}">
                {{ today_stats.revenue|default:0|floatformat:0 }}
            </div>
            <div class="stats-label">
                <span data-translate="today_revenue">Today's Revenue</span> 
                (<span data-currency-symbol>JOD</span>)
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stats-card">
            <div class="stats-number text-primary" data-number data-original="{{ today_stats.transactions|default:0 }}">
                {{ today_stats.transactions|default:0 }}
            </div>
            <div class="stats-label">
                <span data-translate="today_transactions">Today's Transactions</span>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stats-card">
            <div class="stats-number text-info" data-number data-original="{{ today_stats.trips|default:0 }}">
                {{ today_stats.trips|default:0 }}
            </div>
            <div class="stats-label">
                <span data-translate="today_trips">Today's Trips</span>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
        <div class="stats-card">
            <div class="stats-number text-warning" data-number data-original="{{ today_stats.purchase_orders|default:0 }}">
                {{ today_stats.purchase_orders|default:0 }}
            </div>
            <div class="stats-label">
                <span data-translate="today_pos">Today's Purchase Orders</span>
            </div>
        </div>
    </div>
</div>

<!-- Report Categories -->
<div class="row">
    <!-- Comprehensive Reports -->
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="bi bi-clipboard-data"></i> 
                    <span data-translate="comprehensive_reports">Comprehensive Reports</span>
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text text-muted">
                    <span data-translate="detailed_transaction_analysis">Detailed transaction analysis and complete business overview</span>
                </p>
                <div class="d-grid gap-2">
                    <a href="{% url 'frontend:comprehensive_report' %}" class="btn btn-outline-primary">
                        <i class="bi bi-table"></i> <span data-translate="comprehensive_report">Comprehensive Report</span>
                    </a>
                    <a href="{% url 'frontend:daily_report' %}" class="btn btn-outline-success">
                        <i class="bi bi-calendar-day"></i> <span data-translate="daily_report">Daily Report</span>
                    </a>
                    <a href="{% url 'frontend:monthly_report' %}" class="btn btn-outline-info">
                        <i class="bi bi-calendar-month"></i> <span data-translate="monthly_report">Monthly Report</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Sales & Operations -->
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">
                    <i class="bi bi-ship"></i> 
                    <span data-translate="sales_operations">Sales & Operations</span>
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text text-muted">
                    <span data-translate="trip_sales_performance">Trip performance and sales analytics</span>
                </p>
                <div class="d-grid gap-2">
                    <a href="{% url 'frontend:trip_reports' %}" class="btn btn-outline-success">
                        <i class="bi bi-ship"></i> <span data-translate="trip_reports">Trip Reports</span>
                    </a>
                    <a href="{% url 'frontend:po_reports' %}" class="btn btn-outline-primary">
                        <i class="bi bi-receipt"></i> <span data-translate="po_reports">Purchase Order Reports</span>
                    </a>
                    <a href="{% url 'frontend:transactions_list' %}" class="btn btn-outline-secondary">
                        <i class="bi bi-list-ul"></i> <span data-translate="transaction_log">Transaction Log</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced Analytics -->
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header bg-warning text-white">
                <h5 class="mb-0">
                    <i class="bi bi-graph-up"></i> 
                    <span data-translate="advanced_analytics">Advanced Analytics</span>
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text text-muted">
                    <span data-translate="business_intelligence">Business intelligence and predictive analytics</span>
                </p>
                <div class="d-grid gap-2">
                    <a href="{% url 'frontend:analytics_report' %}" class="btn btn-outline-warning">
                        <i class="bi bi-graph-up-arrow"></i> <span data-translate="analytics_dashboard">Analytics Dashboard</span>
                    </a>
                    <button class="btn btn-outline-info" onclick="showComingSoon('inventory_forecast')">
                        <i class="bi bi-boxes"></i> <span data-translate="inventory_forecast">Inventory Forecast</span>
                    </button>
                    <button class="btn btn-outline-secondary" onclick="showComingSoon('profitability_analysis')">
                        <i class="bi bi-currency-dollar"></i> <span data-translate="profitability_analysis">Profitability Analysis</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="bi bi-lightning"></i> 
                    <span data-translate="quick_actions">Quick Actions</span>
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-primary w-100" onclick="showComingSoon('export_all')">
                            <i class="bi bi-file-earmark-excel"></i> <span data-translate="export_all_reports">Export All Reports</span>
                        </button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-success w-100" onclick="showComingSoon('schedule_reports')">
                            <i class="bi bi-clock"></i> <span data-translate="schedule_reports">Schedule Reports</span>
                        </button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-info w-100" onclick="showComingSoon('email_reports')">
                            <i class="bi bi-envelope"></i> <span data-translate="email_reports">Email Reports</span>
                        </button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <a href="{% url 'frontend:inventory_check' %}" class="btn btn-outline-warning w-100">
                            <i class="bi bi-boxes"></i> <span data-translate="inventory_check">Inventory Check</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
// Update last updated time
document.addEventListener('DOMContentLoaded', function() {
    const now = new Date();
    const timeString = now.toLocaleTimeString();
    document.getElementById('last-updated-time').textContent = timeString;
    
    // Add page-specific translations
    const pageTranslations = {
        en: {
            'reports_dashboard': 'Reports Dashboard',
            'comprehensive_business_analytics': 'Comprehensive business analytics and reporting center',
            'last_updated': 'Last Updated',
            'today_revenue': "Today's Revenue",
            'today_transactions': "Today's Transactions", 
            'today_trips': "Today's Trips",
            'today_pos': "Today's Purchase Orders",
            'comprehensive_reports': 'Comprehensive Reports',
            'detailed_transaction_analysis': 'Detailed transaction analysis and complete business overview',
            'comprehensive_report': 'Comprehensive Report',
            'daily_report': 'Daily Report',
            'monthly_report': 'Monthly Report',
            'sales_operations': 'Sales & Operations',
            'trip_sales_performance': 'Trip performance and sales analytics',
            'trip_reports': 'Trip Reports',
            'po_reports': 'Purchase Order Reports',
            'transaction_log': 'Transaction Log',
            'advanced_analytics': 'Advanced Analytics',
            'business_intelligence': 'Business intelligence and predictive analytics',
            'analytics_dashboard': 'Analytics Dashboard',
            'inventory_forecast': 'Inventory Forecast',
            'profitability_analysis': 'Profitability Analysis',
            'quick_actions': 'Quick Actions',
            'export_all_reports': 'Export All Reports',
            'schedule_reports': 'Schedule Reports',
            'email_reports': 'Email Reports',
            'inventory_check': 'Inventory Check',
            'vessel_sales_system': 'Vessel Sales System'
        },
        ar: {
            'reports_dashboard': 'لوحة التقارير',
            'comprehensive_business_analytics': 'تحليلات الأعمال الشاملة ومركز التقارير',
            'last_updated': 'آخر تحديث',
            'today_revenue': 'إيرادات اليوم',
            'today_transactions': 'حركات اليوم',
            'today_trips': 'رحلات اليوم',
            'today_pos': 'أوامر شراء اليوم',
            'comprehensive_reports': 'التقارير الشاملة',
            'detailed_transaction_analysis': 'تحليل مفصل للحركات ونظرة شاملة على الأعمال',
            'comprehensive_report': 'التقرير الشامل',
            'daily_report': 'التقرير اليومي',
            'monthly_report': 'التقرير الشهري',
            'sales_operations': 'المبيعات والعمليات',
            'trip_sales_performance': 'أداء الرحلات وتحليلات المبيعات',
            'trip_reports': 'تقارير الرحلات',
            'po_reports': 'تقارير أوامر الشراء',
            'transaction_log': 'سجل الحركات',
            'advanced_analytics': 'التحليلات المتقدمة',
            'business_intelligence': 'ذكاء الأعمال والتحليلات التنبؤية',
            'analytics_dashboard': 'لوحة التحليلات',
            'inventory_forecast': 'توقعات المخزون',
            'profitability_analysis': 'تحليل الربحية',
            'quick_actions': 'الإجراءات السريعة',
            'export_all_reports': 'تصدير جميع التقارير',
            'schedule_reports': 'جدولة التقارير',
            'email_reports': 'إرسال التقارير بالبريد',
            'inventory_check': 'فحص المخزون',
            'vessel_sales_system': 'نظام مبيعات السفن'
        }
    };

    // Merge with global translations
    const currentTranslations = window.translator.translations;
    Object.keys(pageTranslations).forEach(lang => {
        if (currentTranslations[lang]) {
            Object.assign(currentTranslations[lang], pageTranslations[lang]);
        }
    });
    
    // Apply translations
    updatePageTranslations();
});

function showComingSoon(feature) {
    alertTranslated('feature_coming_soon');
}
</script>
{% endblock %}